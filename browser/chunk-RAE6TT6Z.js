import{b as T}from"./chunk-RB6YHAXG.js";import{a as M,b,c as N,d as j,e as D,g as q,h as V,i as G,j as U}from"./chunk-VZBV3224.js";import{d as R}from"./chunk-WPGPD6B2.js";import{Ca as o,Da as n,Ea as c,Fb as _,G as A,Ja as f,Kb as x,Ma as a,Mb as L,Na as E,Sa as w,Xb as I,ac as h,ec as k,fa as l,gc as O,ja as m,ka as g,ob as v,pa as S,pb as P,ta as p,v as F,ya as u}from"./chunk-YM7BC6NY.js";function z(e){let i=/(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]+/;return!e.value||i.test(e.value)?null:{passwordInvalid:!0}}function B(e){let i=/^[^\s@]+@[^\s@]+\.(?!.*[^a-zA-Z])[a-zA-Z]{2,}$/;return!e.value||i.test(e.value)?null:{emailInvalid:!0}}function Q(e,i){e&1&&(o(0,"p",5),a(1," Email is required "),n())}function W(e,i){e&1&&(o(0,"p",5),a(1," The email is invalid "),n())}function X(e,i){e&1&&(o(0,"span",5),a(1," Password is required "),n())}function ee(e,i){e&1&&(o(0,"p",5),a(1," The password must have at least one letter and one digit "),n())}var C=class e{constructor(i,r,t,s){this.router=i;this.authService=r;this.store=t;this.fb=s;this.loginSendingStatus$=this.store.select(k),this.loginForm=this.fb.group({email:this.fb.control("",[b.required,B]),password:this.fb.control("",[b.required,z])})}loginSendingStatus$;loginForm;backToPreviousPage(){this.router.navigateByUrl(this.authService.redirectUrl)}onSubmit(){this.loginForm&&this.loginForm.valid&&this.store.dispatch(I({email:this.loginForm.value.email,password:this.loginForm.value.password})),this.loginSendingStatus$.pipe(F(i=>i==="Success"),A(()=>this.backToPreviousPage())).subscribe()}static \u0275fac=function(r){return new(r||e)(m(v),m(h),m(_),m(G))};static \u0275cmp=g({type:e,selectors:[["app-login-form"]],decls:17,vars:6,consts:[[1,"login__form","form",3,"ngSubmit","formGroup"],[1,"login__input-wrapper","form__input-wrapper"],["for","email",1,"visually-hidden"],["formControlName","email","type","email","name","email","placeholder","Email",1,"login__input","form__input"],[1,"error-container"],[1,"error"],["for","password",1,"visually-hidden"],["formControlName","password","type","password","name","password","placeholder","Password","autocomplete","false",1,"login__input","form__input"],["type","submit",1,"login__submit","form__submit","button",3,"disabled"]],template:function(r,t){if(r&1&&(o(0,"form",0),f("ngSubmit",function(){return t.onSubmit()}),o(1,"div",1)(2,"label",2),a(3,"E-mail"),n(),c(4,"input",3),o(5,"div",4),S(6,Q,2,0,"p",5)(7,W,2,0,"p",5),n()(),o(8,"div",1)(9,"label",6),a(10,"Password"),n(),c(11,"input",7),o(12,"div",4),S(13,X,2,0,"span",5)(14,ee,2,0,"p",5),n()(),o(15,"button",8),a(16,"Sign in"),n()()),r&2){let s,y,d;p("formGroup",t.loginForm),l(6),u((s=t.loginForm.get("email"))!=null&&s.pristine&&((s=t.loginForm.get("email"))!=null&&s.touched)?6:-1),l(),u((y=t.loginForm.get("email"))!=null&&y.touched&&t.loginForm.controls.email.hasError("emailInvalid")?7:-1),l(6),u((d=t.loginForm.get("password"))!=null&&d.pristine&&((d=t.loginForm.get("password"))!=null&&d.touched)?13:-1),l(),u(t.loginForm.controls.password.hasError("passwordInvalid")?14:-1),l(),p("disabled",t.loginForm.invalid)}},dependencies:[U,D,M,N,j,q,V],styles:[".error-container[_ngcontent-%COMP%]{height:24px;display:flex;align-items:center;justify-content:start;transition:opacity .3s ease-in-out}.error[_ngcontent-%COMP%]{color:tomato;font-size:12px;opacity:1;visibility:visible;margin-top:-15px;margin-bottom:25px}.error-container[_ngcontent-%COMP%]   span.error[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   p.error[_ngcontent-%COMP%]{max-height:24px;overflow:hidden;transition:max-height .3s ease-in-out}.error-container[_ngcontent-%COMP%]:empty{opacity:0;visibility:hidden}"]})};var te=()=>["/"],Z=class e{constructor(i,r,t){this.authService=i;this.router=r;this.store=t;this.randomCity=R(Object.values(x))}randomCity=L;ngOnInit(){this.authService.isUserAuthenticated()&&this.router.navigate(["/"])}onRandomCityClick(){this.store.dispatch(T({city:this.randomCity}))}static \u0275fac=function(r){return new(r||e)(m(h),m(v),m(_))};static \u0275cmp=g({type:e,selectors:[["app-login-page"]],decls:12,vars:3,consts:[[1,"page__main","page__main--login"],[1,"page__login-container","container"],[1,"login"],[1,"login__title"],[1,"locations","locations--login","locations--current"],[1,"locations__item"],["tabindex","0",1,"locations__item-link",3,"click","keyup.enter","routerLink"]],template:function(r,t){r&1&&(o(0,"app-layout")(1,"main",0)(2,"div",1)(3,"section",2)(4,"h1",3),a(5,"Sign in"),n(),c(6,"app-login-form"),n(),o(7,"section",4)(8,"div",5)(9,"a",6),f("click",function(){return t.onRandomCityClick()})("keyup.enter",function(){return t.onRandomCityClick()}),o(10,"span"),a(11),n()()()()()()()),r&2&&(l(9),p("routerLink",w(2,te)),l(2),E(t.randomCity))},dependencies:[O,C,P],encapsulation:2})};export{Z as LoginPageComponent};

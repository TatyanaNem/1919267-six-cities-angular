import{a as an,b as mn,d as ln,f as fn,i as un,j as dn}from"./chunk-45WKQC3B.js";import{a as cn,b as pn}from"./chunk-W3SY63BT.js";import{b as Je,c as qe,h as Ye,i as Qe,j as tn,k as en,l as nn,m as on,n as rn,r as sn}from"./chunk-ZL6F2LW5.js";import{A as ie,Ab as Le,B as oe,C as re,Cb as Ve,D as bt,E as rt,Fa as A,Fb as wt,G as se,Ga as ge,Gb as Mt,Ha as tt,J as H,Ja as _e,L as Y,M as O,N as G,O as ae,Ob as ze,Pb as Ue,Q as I,Qa as $,R as b,Ra as z,Rb as He,S as ce,Sa as Ce,T as pe,Ta as ye,U as me,W as Z,Wb as Ge,X as le,Xa as ve,Xb as Ze,Y as fe,Yb as ct,Za as Se,Zb as We,_ as ue,_b as kt,a as J,aa as g,ab as xe,ac as Xe,b as q,bb as Oe,bc as Ke,ca as de,da as T,db as Ie,e as Zt,eb as be,f as xt,fb as Ae,gb as Ee,h as Wt,i as Xt,ia as Q,ib as Te,j as Kt,jb as we,k as Jt,l as qt,la as N,lb as Me,mb as ke,n as Ot,na as L,nb as Fe,o as Yt,oa as he,ob as De,p as Qt,pb as Pe,q as V,qa as At,ra as st,sa as W,sb as Et,ta as X,tb as at,u as It,ua as f,ub as Ne,v as B,va as d,vb as Re,w as ot,wa as M,wb as $e,x as te,xa as R,xb as Tt,y as ee,ya as k,yb as je,z as ne,za as C,zb as Be}from"./chunk-RW7BJWYE.js";var nt="PERFORM_ACTION",Hn="REFRESH",vn="RESET",Sn="ROLLBACK",xn="COMMIT",On="SWEEP",In="TOGGLE_ACTION",Gn="SET_ACTIONS_ACTIVE",bn="JUMP_TO_STATE",An="JUMP_TO_ACTION",Ht="IMPORT_STATE",En="LOCK_CHANGES",Tn="PAUSE_RECORDING",K=class{constructor(n,t){if(this.action=n,this.timestamp=t,this.type=nt,typeof n.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},Ft=class{constructor(){this.type=Hn}},Dt=class{constructor(n){this.timestamp=n,this.type=vn}},Pt=class{constructor(n){this.timestamp=n,this.type=Sn}},Nt=class{constructor(n){this.timestamp=n,this.type=xn}},Rt=class{constructor(){this.type=On}},$t=class{constructor(n){this.id=n,this.type=In}};var jt=class{constructor(n){this.index=n,this.type=bn}},Bt=class{constructor(n){this.actionId=n,this.type=An}},Lt=class{constructor(n){this.nextLiftedState=n,this.type=Ht}},Vt=class{constructor(n){this.status=n,this.type=En}},zt=class{constructor(n){this.status=n,this.type=Tn}};var ft=new Y("@ngrx/store-devtools Options"),hn=new Y("@ngrx/store-devtools Initial Config");function wn(){return null}var Zn="NgRx Store DevTools";function Wn(e){let n={maxAge:!1,monitor:wn,actionSanitizer:void 0,stateSanitizer:void 0,name:Zn,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},t=typeof e=="function"?e():e,i=t.logOnly?{pause:!0,export:!0,test:!0}:!1,o=t.features||i||n.features;o.import===!0&&(o.import="custom");let r=Object.assign({},n,{features:o},t);if(r.maxAge&&r.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${r.maxAge}`);return r}function gn(e,n){return e.filter(t=>n.indexOf(t)<0)}function Mn(e){let{computedStates:n,currentStateIndex:t}=e;if(t>=n.length){let{state:o}=n[n.length-1];return o}let{state:i}=n[t];return i}function et(e){return new K(e,+Date.now())}function Xn(e,n){return Object.keys(n).reduce((t,i)=>{let o=Number(i);return t[o]=kn(e,n[o],o),t},{})}function kn(e,n,t){return q(J({},n),{action:e(n.action,t)})}function Kn(e,n){return n.map((t,i)=>({state:Fn(e,t.state,i),error:t.error}))}function Fn(e,n,t){return e(n,t)}function Dn(e){return e.predicate||e.actionsSafelist||e.actionsBlocklist}function Jn(e,n,t,i){let o=[],r={},y=[];return e.stagedActionIds.forEach((m,v)=>{let s=e.actionsById[m];s&&(v&&Gt(e.computedStates[v],s,n,t,i)||(r[m]=s,o.push(m),y.push(e.computedStates[v])))}),q(J({},e),{stagedActionIds:o,actionsById:r,computedStates:y})}function Gt(e,n,t,i,o){let r=t&&!t(e,n.action),y=i&&!n.action.type.match(i.map(v=>_n(v)).join("|")),m=o&&n.action.type.match(o.map(v=>_n(v)).join("|"));return r||y||m}function _n(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Pn(e){return{ngZone:e?G(le):null,connectInZone:e}}var ut=(()=>{class e extends at{static{this.\u0275fac=(()=>{let t;return function(o){return(t||(t=me(e)))(o||e)}})()}static{this.\u0275prov=H({token:e,factory:e.\u0275fac})}}return e})(),pt={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Ut=new Y("@ngrx/store-devtools Redux Devtools Extension"),Nn=(()=>{class e{constructor(t,i,o){this.config=i,this.dispatcher=o,this.zoneConfig=Pn(this.config.connectInZone),this.devtoolsExtension=t,this.createActionStreams()}notify(t,i){if(this.devtoolsExtension)if(t.type===nt){if(i.isLocked||i.isPaused)return;let o=Mn(i);if(Dn(this.config)&&Gt(o,t,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let r=this.config.stateSanitizer?Fn(this.config.stateSanitizer,o,i.currentStateIndex):o,y=this.config.actionSanitizer?kn(this.config.actionSanitizer,t,i.nextActionId):t;this.sendToReduxDevtools(()=>this.extensionConnection.send(y,r))}else{let o=q(J({},i),{stagedActionIds:i.stagedActionIds,actionsById:this.config.actionSanitizer?Xn(this.config.actionSanitizer,i.actionsById):i.actionsById,computedStates:this.config.stateSanitizer?Kn(this.config.stateSanitizer,i.computedStates):i.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,o,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new xt(t=>{let i=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=i,i.init(),i.subscribe(o=>t.next(o)),i.unsubscribe}):Jt}createActionStreams(){let t=this.createChangesObservable().pipe(oe()),i=t.pipe(B(s=>s.type===pt.START)),o=t.pipe(B(s=>s.type===pt.STOP)),r=t.pipe(B(s=>s.type===pt.DISPATCH),V(s=>this.unwrapAction(s.payload)),te(s=>s.type===Ht?this.dispatcher.pipe(B(S=>S.type===Tt),Qt(1e3),ee(1e3),V(()=>s),ot(()=>Ot(s)),ne(1)):Ot(s))),m=t.pipe(B(s=>s.type===pt.ACTION),V(s=>this.unwrapAction(s.payload))).pipe(rt(o)),v=r.pipe(rt(o));this.start$=i.pipe(rt(o)),this.actions$=this.start$.pipe(bt(()=>m)),this.liftedActions$=this.start$.pipe(bt(()=>v))}unwrapAction(t){return typeof t=="string"?(0,eval)(`(${t})`):t}getExtensionConfig(t){let i={name:t.name,features:t.features,serialize:t.serialize,autoPause:t.autoPause??!1,trace:t.trace??!1,traceLimit:t.traceLimit??75};return t.maxAge!==!1&&(i.maxAge=t.maxAge),i}sendToReduxDevtools(t){try{t()}catch(i){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",i)}}static{this.\u0275fac=function(i){return new(i||e)(O(Ut),O(ft),O(ut))}}static{this.\u0275prov=H({token:e,factory:e.\u0275fac})}}return e})(),lt={type:Et},qn="@ngrx/store-devtools/recompute",Yn={type:qn};function Rn(e,n,t,i,o){if(i)return{state:t,error:"Interrupted by an error up the chain"};let r=t,y;try{r=e(t,n)}catch(m){y=m.toString(),o.handleError(m)}return{state:r,error:y}}function mt(e,n,t,i,o,r,y,m,v){if(n>=e.length&&e.length===r.length)return e;let s=e.slice(0,n),S=r.length-(v?1:0);for(let a=n;a<S;a++){let l=r[a],E=o[l].action,p=s[a-1],c=p?p.state:i,F=p?p.error:void 0,D=y.indexOf(l)>-1?p:Rn(t,E,c,F,m);s.push(D)}return v&&s.push(e[e.length-1]),s}function Qn(e,n){return{monitorState:n(void 0,{}),nextActionId:1,actionsById:{0:et(lt)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function ti(e,n,t,i,o={}){return r=>(y,m)=>{let{monitorState:v,actionsById:s,nextActionId:S,stagedActionIds:a,skippedActionIds:l,committedState:E,currentStateIndex:p,computedStates:c,isLocked:F,isPaused:x}=y||n;y||(s=Object.create(s));function D(_){let h=_,j=a.slice(1,h+1);for(let w=0;w<j.length;w++)if(c[w+1].error){h=w,j=a.slice(1,h+1);break}else delete s[j[w]];l=l.filter(w=>j.indexOf(w)===-1),a=[0,...a.slice(h+1)],E=c[h].state,c=c.slice(h),p=p>h?p-h:0}function P(){s={0:et(lt)},S=1,a=[0],l=[],E=c[p].state,p=0,c=[]}let u=0;switch(m.type){case En:{F=m.status,u=1/0;break}case Tn:{x=m.status,x?(a=[...a,S],s[S]=new K({type:"@ngrx/devtools/pause"},+Date.now()),S++,u=a.length-1,c=c.concat(c[c.length-1]),p===a.length-2&&p++,u=1/0):P();break}case vn:{s={0:et(lt)},S=1,a=[0],l=[],E=e,p=0,c=[];break}case xn:{P();break}case Sn:{s={0:et(lt)},S=1,a=[0],l=[],p=0,c=[];break}case In:{let{id:_}=m;l.indexOf(_)===-1?l=[_,...l]:l=l.filter(j=>j!==_),u=a.indexOf(_);break}case Gn:{let{start:_,end:h,active:j}=m,w=[];for(let St=_;St<h;St++)w.push(St);j?l=gn(l,w):l=[...l,...w],u=a.indexOf(_);break}case bn:{p=m.index,u=1/0;break}case An:{let _=a.indexOf(m.actionId);_!==-1&&(p=_),u=1/0;break}case On:{a=gn(a,l),l=[],p=Math.min(p,a.length-1);break}case nt:{if(F)return y||n;if(x||y&&Gt(y.computedStates[p],m,o.predicate,o.actionsSafelist,o.actionsBlocklist)){let h=c[c.length-1];c=[...c.slice(0,-1),Rn(r,m.action,h.state,h.error,t)],u=1/0;break}o.maxAge&&a.length===o.maxAge&&D(1),p===a.length-1&&p++;let _=S++;s[_]=m,a=[...a,_],u=a.length-1;break}case Ht:{({monitorState:v,actionsById:s,nextActionId:S,stagedActionIds:a,skippedActionIds:l,committedState:E,currentStateIndex:p,computedStates:c,isLocked:F,isPaused:x}=m.nextLiftedState);break}case Et:{u=0,o.maxAge&&a.length>o.maxAge&&(c=mt(c,u,r,E,s,a,l,t,x),D(a.length-o.maxAge),u=1/0);break}case Tt:{if(c.filter(h=>h.error).length>0)u=0,o.maxAge&&a.length>o.maxAge&&(c=mt(c,u,r,E,s,a,l,t,x),D(a.length-o.maxAge),u=1/0);else{if(!x&&!F){p===a.length-1&&p++;let h=S++;s[h]=new K(m,+Date.now()),a=[...a,h],u=a.length-1,c=mt(c,u,r,E,s,a,l,t,x)}c=c.map(h=>q(J({},h),{state:r(h.state,Yn)})),p=a.length-1,o.maxAge&&a.length>o.maxAge&&D(a.length-o.maxAge),u=1/0}break}default:{u=1/0;break}}return c=mt(c,u,r,E,s,a,l,t,x),v=i(v,m),{monitorState:v,actionsById:s,nextActionId:S,stagedActionIds:a,skippedActionIds:l,committedState:E,currentStateIndex:p,computedStates:c,isLocked:F,isPaused:x}}}var Cn=(()=>{class e{constructor(t,i,o,r,y,m,v,s){let S=Qn(v,s.monitor),a=ti(v,S,m,s.monitor,s),l=It(It(i.asObservable().pipe(re(1)),r.actions$).pipe(V(et)),t,r.liftedActions$).pipe(qt(Kt)),E=o.pipe(V(a)),p=Pn(s.connectInZone),c=new Xt(1);this.liftedStateSubscription=l.pipe(se(E),yn(p),ie(({state:D},[P,u])=>{let _=u(D,P);return P.type!==nt&&Dn(s)&&(_=Jn(_,s.predicate,s.actionsSafelist,s.actionsBlocklist)),r.notify(P,_),{state:_,action:P}},{state:S,action:null})).subscribe(({state:D,action:P})=>{if(c.next(D),P.type===nt){let u=P.action;y.next(u)}}),this.extensionStartSubscription=r.start$.pipe(yn(p)).subscribe(()=>{this.refresh()});let F=c.asObservable(),x=F.pipe(V(Mn));Object.defineProperty(x,"state",{value:Pe(x,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=t,this.liftedState=F,this.state=x}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(t){this.dispatcher.next(t)}next(t){this.dispatcher.next(t)}error(t){}complete(){}performAction(t){this.dispatch(new K(t,+Date.now()))}refresh(){this.dispatch(new Ft)}reset(){this.dispatch(new Dt(+Date.now()))}rollback(){this.dispatch(new Pt(+Date.now()))}commit(){this.dispatch(new Nt(+Date.now()))}sweep(){this.dispatch(new Rt)}toggleAction(t){this.dispatch(new $t(t))}jumpToAction(t){this.dispatch(new Bt(t))}jumpToState(t){this.dispatch(new jt(t))}importState(t){this.dispatch(new Lt(t))}lockChanges(t){this.dispatch(new Vt(t))}pauseRecording(t){this.dispatch(new zt(t))}static{this.\u0275fac=function(i){return new(i||e)(O(ut),O(at),O(Re),O(Nn),O(je),O(fe),O(Ne),O(ft))}}static{this.\u0275prov=H({token:e,factory:e.\u0275fac})}}return e})();function yn({ngZone:e,connectInZone:n}){return t=>n?new xt(i=>t.subscribe({next:o=>e.run(()=>i.next(o)),error:o=>e.run(()=>i.error(o)),complete:()=>e.run(()=>i.complete())})):t}var ei=new Y("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function ni(e,n){return!!e||n.monitor!==wn}function ii(){let e="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[e]<"u"?window[e]:null}function oi(e){return e.state}function $n(e={}){return ae([Nn,ut,Cn,{provide:hn,useValue:e},{provide:ei,deps:[Ut,ft],useFactory:ni},{provide:Ut,useFactory:ii},{provide:ft,deps:[hn],useFactory:Wn},{provide:Be,deps:[Cn],useFactory:oi},{provide:$e,useExisting:ut}])}var dt=class e{currentCity;static \u0275fac=function(t){return new(t||e)};static \u0275cmp=T({type:e,selectors:[["app-main-block-empty"]],inputs:{currentCity:"currentCity"},decls:6,vars:1,consts:[[1,"cities__no-places"],[1,"cities__status-wrapper","tabs__content"],[1,"cities__status"],[1,"cities__status-description"]],template:function(t,i){t&1&&(f(0,"section",0)(1,"div",1)(2,"b",2),A(3,"No places to stay available"),d(),f(4,"p",3),A(5),d()()()),t&2&&(g(5),tt(" We could not find any property available at the moment in ",i.currentCity," "))},styles:[".cities__no-places[_ngcontent-%COMP%]{display:flex;height:100%}"]})};function ri(e,n){if(e&1){let t=R();f(0,"li",7),k("click",function(){let o=I(t).$implicit,r=C();return b(r.setSortingOption(o))})("keyup.enter",function(){let o=I(t).$implicit,r=C();return b(r.setSortingOption(o))})("mouseenter",function(){let o=I(t).$index,r=C();return b(r.isHovered[o]=!0)})("mouseleave",function(){let o=I(t).$index,r=C();return b(r.isHovered[o]=!1)}),A(1),d()}if(e&2){let t=n.$implicit,i=n.$index,o=C();L("places__option--active",o.isHovered[i]),g(),tt(" ",t," ")}}var ht=class e{selectedOption;changeSortingOption=new Z;sortingOptionsList=Object.values(ze);isFormOpened=!1;isHovered=[];ngOnInit(){this.isHovered=Array.from({length:this.sortingOptionsList.length},()=>!1)}get arrowStyle(){return{transform:`translateY(-50%) ${this.isFormOpened?"rotate(180deg)":""}`}}setIsFormOpen(){this.isFormOpened=!this.isFormOpened}setSortingOption(n){this.changeSortingOption.emit(n),this.isFormOpened=!1}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=T({type:e,selectors:[["app-sorting-form"]],inputs:{selectedOption:"selectedOption"},outputs:{changeSortingOption:"changeSortingOption"},decls:10,vars:5,consts:[["action","#","method","get",1,"places__sorting"],[1,"places__sorting-caption"],["tabindex","0",1,"places__sorting-type",3,"click","keyup.enter"],["width","7","height","4",1,"places__sorting-arrow"],[0,"xlink","href","#icon-arrow-select"],[1,"places__options","places__options--custom"],["tabindex","0",1,"places__option",3,"places__option--active"],["tabindex","0",1,"places__option",3,"click","keyup.enter","mouseenter","mouseleave"]],template:function(t,i){t&1&&(f(0,"form",0)(1,"span",1),A(2,"Sort by "),d(),f(3,"span",2),k("click",function(){return i.setIsFormOpen()})("keyup.enter",function(){return i.setIsFormOpen()}),A(4),ce(),f(5,"svg",3),M(6,"use",4),d()(),pe(),f(7,"ul",5),W(8,ri,2,3,"li",6,st),d()()),t&2&&(g(4),tt(" ",i.selectedOption," "),g(),he(i.arrowStyle),g(2),L("places__options--opened",i.isFormOpened),g(),X(i.sortingOptionsList))},encapsulation:2})};var si=(e,n)=>n.id;function ai(e,n){if(e&1){let t=R();f(0,"app-offer-card",6),k("mouseenter",function(){let o=I(t).$implicit,r=C();return b(r.onMouseOnCard(o.id))})("mouseleave",function(){I(t);let o=C();return b(o.onMouseLeaveCard())}),d()}if(e&2){let t=n.$implicit;N("offer",t)}}var gt=class e{offers=[];currentCity;changeActiveId=new Z;selectedOption=ue(Ue);sortedOffers=ve(()=>{let n=qe[this.selectedOption()];return n([...this.offers])});onMouseOnCard(n){this.changeActiveId.emit(n)}onMouseLeaveCard(){this.changeActiveId.emit(null)}oncChangeSortingOption(n){this.selectedOption.set(n)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=T({type:e,selectors:[["app-main-block"]],inputs:{offers:"offers",currentCity:"currentCity"},outputs:{changeActiveId:"changeActiveId"},decls:10,vars:7,consts:[[1,"cities__places","places"],[1,"visually-hidden"],[1,"places__found"],[3,"changeSortingOption","selectedOption"],[1,"cities__places-list","places__list","tabs__content"],[3,"offer"],[3,"mouseenter","mouseleave","offer"]],template:function(t,i){t&1&&(f(0,"section",0)(1,"h2",1),A(2,"Places"),d(),f(3,"b",2),A(4),$(5,"pluralEnding"),d(),f(6,"app-sorting-form",3),k("changeSortingOption",function(r){return i.oncChangeSortingOption(r)}),d(),f(7,"div",4),W(8,ai,1,1,"app-offer-card",5,si),d()()),t&2&&(g(4),_e("",i.offers.length," ",Ce(5,4,"place",i.offers.length)," to stay in ",i.currentCity,""),g(2),N("selectedOption",i.selectedOption()),g(2),X(i.offers))},dependencies:[Je,sn,ht],styles:[".cities__places[_ngcontent-%COMP%]{height:100%}"]})};function ci(e,n){if(e&1){let t=R();f(0,"li",3)(1,"a",4),k("click",function(){let o=I(t).$implicit,r=C();return b(r.onSelectCity(o))})("keyup.enter",function(){let o=I(t).$implicit,r=C();return b(r.onSelectCity(o))}),f(2,"span"),A(3),d()()()}if(e&2){let t=n.$implicit,i=C();g(),L("tabs__item--active",t===i.currentCity),g(2),ge(t)}}var _t=class e{currentCity;changeCity=new Z;cities=Object.values(wt);onSelectCity(n){this.changeCity.emit(n)}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=T({type:e,selectors:[["app-tabs"]],inputs:{currentCity:"currentCity"},outputs:{changeCity:"changeCity"},decls:5,vars:0,consts:[[1,"tabs"],[1,"locations","container"],[1,"locations__list","tabs__list"],[1,"locations__item"],["tabindex","0",1,"locations__item-link","tabs__item",3,"click","keyup.enter"]],template:function(t,i){t&1&&(f(0,"div",0)(1,"section",1)(2,"ul",2),W(3,ci,4,3,"li",3,st),d()()()),t&2&&(g(3),X(i.cities))},encapsulation:2})};function pi(e,n){e&1&&M(0,"app-loader")}function mi(e,n){if(e&1){let t=R();f(0,"app-main-block",6),$(1,"async"),k("changeActiveId",function(o){I(t);let r=C(2);return b(r.onChangeActiveId(o))}),d(),f(2,"div",7),M(3,"app-map",8),d()}if(e&2){let t=C(),i=C();N("offers",t)("currentCity",z(1,5,i.currentCity$)),g(3),N("city",i.cityForMap)("offers",t)("activeOfferId",i.activeOfferId)}}function li(e,n){if(e&1&&(M(0,"app-main-block-empty",9),$(1,"async"),M(2,"div",7)),e&2){let t=C(2);N("currentCity",z(1,1,t.currentCity$))}}function fi(e,n){if(e&1){let t=R();f(0,"main",1)(1,"h1",2),A(2,"Cities"),d(),f(3,"app-tabs",3),$(4,"async"),k("changeCity",function(o){I(t);let r=C();return b(r.onChangeCurrentCity(o))}),d(),f(5,"div",4)(6,"div",5),Q(7,pi,1,0,"app-loader"),$(8,"async"),Q(9,mi,4,7)(10,li,3,3),d()()()}if(e&2){let t,i=n,o=C();L("page__main--index-empty",(i==null?null:i.length)===0),g(3),N("currentCity",z(4,6,o.currentCity$)),g(3),L("cities__places-container--empty",(i==null?null:i.length)===0),g(),At((t=z(8,8,o.isLoading$))?7:i&&i.length>0?9:10,t)}}function ui(e,n){if(e&1&&(M(0,"app-main-block-empty",9),$(1,"async"),M(2,"div",7)),e&2){let t=C();N("currentCity",z(1,1,t.currentCity$))}}var Ct=class e{constructor(n){this.store=n;this.offers$=this.store.select(en),this.isAuth$=this.store.select(kt),this.isLoading$=this.store.select(nn)}offers$;currentCity$=new Wt("Paris");cityForMap=Mt.Paris;activeOfferId=null;isAuth$;isLoading$;subscription=new Zt;ngOnInit(){this.store.dispatch(He()),this.store.dispatch(Ye()),this.isAuth$=this.store.select(kt),this.subscription.add(this.isAuth$.pipe(B(n=>n==="AUTH")).subscribe(()=>this.store.dispatch(rn()))),this.subscription.add(this.currentCity$.subscribe(n=>{this.cityForMap=Mt[n]}))}onChangeCurrentCity(n){this.store.dispatch(Qe({city:n})),this.currentCity$.next(n)}onChangeActiveId(n){this.activeOfferId=n}ngOnDestroy(){this.subscription.unsubscribe()}static \u0275fac=function(t){return new(t||e)(de(Le))};static \u0275cmp=T({type:e,selectors:[["app-main-page"]],decls:4,vars:3,consts:[[1,"page__main","page__main--index",3,"page__main--index-empty"],[1,"page__main","page__main--index"],[1,"visually-hidden"],[3,"changeCity","currentCity"],[1,"cities"],[1,"cities__places-container","container"],[3,"changeActiveId","offers","currentCity"],[1,"cities__right-section"],[3,"city","offers","activeOfferId"],[3,"currentCity"]],template:function(t,i){if(t&1&&(f(0,"app-layout"),Q(1,fi,11,10,"main",0),$(2,"async"),Q(3,ui,3,3),d()),t&2){let o;g(),At((o=z(2,1,i.offers$))?1:3,o)}},dependencies:[xe,Se,Ke,_t,gt,dt,an,mn],encapsulation:2,changeDetection:0})};var yt=class e{constructor(n,t){this.authService=n;this.router=t}canActivate(){return this.authService.isUserAuthenticated()?!0:(this.router.navigate(["/login"]),!1)}static \u0275fac=function(t){return new(t||e)(O(Ze),O(we))};static \u0275prov=H({token:e,factory:e.\u0275fac,providedIn:"root"})};var jn=[{path:"",component:Ct,title:"Main page"},{path:"offer/:offerId",loadComponent:()=>import("./chunk-6AJGIYVY.js").then(e=>e.OfferDetailsPageComponent),title:"Offer page"},{path:"favorites",loadComponent:()=>import("./chunk-LAHVBJ6K.js").then(e=>e.FavoritesPageComponent),title:"Favorites page",canActivate:[yt]},{path:"login",loadComponent:()=>import("./chunk-T6UU7YSK.js").then(e=>e.LoginPageComponent),title:"Login page"},{path:"**",loadComponent:()=>import("./chunk-TYYIFUYZ.js").then(e=>e.NotFoundPageComponent),title:"Not found page"}];var Bn={OFFERS_DATA:on,FAVORITES_DATA:pn,OFFER_DATA:dn,REVIEWS_DATA:fn,USER_DATA:Xe};var Ln=(e,n)=>{let t=G(ct);return n(e).pipe(ot(i=>(i.status===Oe.Unauthorized&&t.dropToken(),console.log(i.error.message),Yt(()=>i))))};var Vn=(e,n)=>{let t=G(ct).getToken(),i=e.clone({headers:e.headers.set("X-Token",t)});return n(i)};var hi={scrollPositionRestoration:"top"},gi=ke(hi),zn={providers:[ye({eventCoalescing:!0}),Me(jn,Fe(),gi),Ve(Bn),$n({maxAge:25,autoPause:!0}),Ge(tn,cn,un,ln,We),Ie(Ae(),be([Vn,Ln]))]};var vt=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=T({type:e,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){t&1&&M(0,"router-outlet")},dependencies:[De,Te],encapsulation:2})};Ee(vt,zn).catch(e=>console.error(e));

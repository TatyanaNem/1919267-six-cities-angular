import{a as x,b as S,c as I,d as L,g as M,i as O,j as N,m as T,o as R}from"./chunk-O7BT5NGP.js";import{$b as A,Ab as w,F,Fa as r,Sb as E,Xb as f,aa as s,bc as P,ca as l,da as d,ia as _,jb as g,la as h,qa as p,ua as i,v as b,va as o,wa as u,ya as y}from"./chunk-RW7BJWYE.js";function D(e){let t=/(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]+/;return!e.value||t.test(e.value)?null:{passwordInvalid:!0}}function j(e){let t=/^[^\s@]+@[^\s@]+\.(?!.*[^a-zA-Z])[a-zA-Z]{2,}$/;return!e.value||t.test(e.value)?null:{emailInvalid:!0}}function B(e,t){e&1&&(i(0,"p",5),r(1," Email is required "),o())}function Z(e,t){e&1&&(i(0,"p",5),r(1," The email is invalid "),o())}function $(e,t){e&1&&(i(0,"span",5),r(1," Password is required "),o())}function k(e,t){e&1&&(i(0,"p",5),r(1," The password must have at least one letter and one digit "),o())}var v=class e{constructor(t,a,n,m){this.router=t;this.authService=a;this.store=n;this.fb=m;this.loginSendingStatus$=this.store.select(A),this.loginForm=this.fb.group({email:this.fb.control("",[S.required,j]),password:this.fb.control("",[S.required,D])})}loginSendingStatus$;loginForm;backToPreviousPage(){this.router.navigateByUrl(this.authService.redirectUrl)}onSubmit(){this.loginForm&&this.loginForm.valid&&this.store.dispatch(E({email:this.loginForm.value.email,password:this.loginForm.value.password})),this.loginSendingStatus$.pipe(b(t=>t==="Success"),F(()=>this.backToPreviousPage())).subscribe()}static \u0275fac=function(a){return new(a||e)(l(g),l(f),l(w),l(T))};static \u0275cmp=d({type:e,selectors:[["app-login-form"]],decls:17,vars:6,consts:[[1,"login__form","form",3,"ngSubmit","formGroup"],[1,"login__input-wrapper","form__input-wrapper"],["for","email",1,"visually-hidden"],["formControlName","email","type","email","name","email","placeholder","Email",1,"login__input","form__input"],[1,"error-container"],[1,"error"],["for","password",1,"visually-hidden"],["formControlName","password","type","password","name","password","placeholder","Password","autocomplete","false",1,"login__input","form__input"],["type","submit",1,"login__submit","form__submit","button",3,"disabled"]],template:function(a,n){if(a&1&&(i(0,"form",0),y("ngSubmit",function(){return n.onSubmit()}),i(1,"div",1)(2,"label",2),r(3,"E-mail"),o(),u(4,"input",3),i(5,"div",4),_(6,B,2,0,"p",5)(7,Z,2,0,"p",5),o()(),i(8,"div",1)(9,"label",6),r(10,"Password"),o(),u(11,"input",7),i(12,"div",4),_(13,$,2,0,"span",5)(14,k,2,0,"p",5),o()(),i(15,"button",8),r(16,"Sign in"),o()()),a&2){let m,C,c;h("formGroup",n.loginForm),s(6),p((m=n.loginForm.get("email"))!=null&&m.pristine&&((m=n.loginForm.get("email"))!=null&&m.touched)?6:-1),s(),p((C=n.loginForm.get("email"))!=null&&C.touched&&n.loginForm.controls.email.hasError("emailInvalid")?7:-1),s(6),p((c=n.loginForm.get("password"))!=null&&c.pristine&&((c=n.loginForm.get("password"))!=null&&c.touched)?13:-1),s(),p(n.loginForm.controls.password.hasError("passwordInvalid")?14:-1),s(),h("disabled",n.loginForm.invalid)}},dependencies:[R,M,x,I,L,O,N],styles:[".error-container[_ngcontent-%COMP%]{height:24px;display:flex;align-items:center;justify-content:start;transition:opacity .3s ease-in-out}.error[_ngcontent-%COMP%]{color:tomato;font-size:12px;opacity:1;visibility:visible;margin-top:-15px;margin-bottom:25px}.error-container[_ngcontent-%COMP%]   span.error[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%]   p.error[_ngcontent-%COMP%]{max-height:24px;overflow:hidden;transition:max-height .3s ease-in-out}.error-container[_ngcontent-%COMP%]:empty{opacity:0;visibility:hidden}"]})};var q=class e{constructor(t,a){this.authService=t;this.router=a}ngOnInit(){this.authService.isUserAuthenticated()&&this.router.navigate(["/"])}static \u0275fac=function(a){return new(a||e)(l(f),l(g))};static \u0275cmp=d({type:e,selectors:[["app-login-page"]],decls:12,vars:0,consts:[[1,"page__main","page__main--login"],[1,"page__login-container","container"],[1,"login"],[1,"login__title"],[1,"locations","locations--login","locations--current"],[1,"locations__item"],["href","#",1,"locations__item-link"]],template:function(a,n){a&1&&(i(0,"app-layout")(1,"main",0)(2,"div",1)(3,"section",2)(4,"h1",3),r(5,"Sign in"),o(),u(6,"app-login-form"),o(),i(7,"section",4)(8,"div",5)(9,"a",6)(10,"span"),r(11,"Amsterdam"),o()()()()()()())},dependencies:[P,v],encapsulation:2})};export{q as LoginPageComponent};

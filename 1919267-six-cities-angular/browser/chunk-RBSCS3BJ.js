import{b as Q,g as V}from"./chunk-WPGPD6B2.js";import{Ea as _,Gb as p,Ib as s,Jb as D,K as n,Ma as W,N as F,O as c,Qb as K,Rb as w,Sb as u,Yb as d,Zb as x,_b as R,a as i,b as o,fb as h,ka as U,n as m,p as v,q as l,s as g,vb as f,w as O,wb as a}from"./chunk-YM7BC6NY.js";var Z=class e{static \u0275fac=function(t){return new(t||e)};static \u0275cmp=U({type:e,selectors:[["app-loader"]],decls:2,vars:0,consts:[[1,"loader"]],template:function(t,y){t&1&&(_(0,"span",0),W(1,";"))},styles:['.loader[_ngcontent-%COMP%]{width:100%;height:4.8px;display:inline-block;position:absolute;top:0;left:0;background:#ffffff26;overflow:hidden}.loader[_ngcontent-%COMP%]:after{content:"";width:500px;height:4.8px;background:#4481c3;position:absolute;top:0;left:0;box-sizing:border-box;animation:_ngcontent-%COMP%_hitZak 1s linear infinite alternate}@keyframes _ngcontent-%COMP%_hitZak{0%{left:0;transform:translate(-1%)}to{left:100%;transform:translate(-99%)}}']})};var N=f("[Offer Details Page] Get Active Offer",a()),I=f("[Offer Details Page] Get Active Offer Success",a()),S=f("[Offer Details Page] Get Active Offer Failure",a()),$=f("[Offer Details Page] Get Nearby Offers",a()),P=f("[Offer Details Page] Get Nearby Offers Success",a()),z=f("[Offer Details Page] Get Nearby Offers Failure",a());var H=e=>e.OFFER_DATA,me=p(H,e=>e.activeOffer),ve=p(H,e=>e.nearByOffers),le=p(H,e=>e.isLoading);var C=class e{constructor(r){this.http=r}getActiveOffer(r){return this.http.get(`${w}/offers/${r}`).pipe(v(u))}getNearbyOffers(r){return this.http.get(`${w}/offers/${r}/nearby`).pipe(v(u))}static \u0275fac=function(t){return new(t||e)(F(h))};static \u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"})};var X=class e{actions$=c(x);offerService=c(C);getActiveOffer$=d(()=>this.actions$.pipe(R(N.type),g(({id:r})=>this.offerService.getActiveOffer(r).pipe(l(t=>I({offer:t})),O(t=>m(S({error:t.message})))))));getNearbyOffers$=d(()=>this.actions$.pipe(R($.type),g(({id:r})=>this.offerService.getNearbyOffers(r).pipe(l(t=>P({nearByOffers:t})),O(t=>m(z({error:t.message})))))));static \u0275fac=function(t){return new(t||e)};static \u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"})};var ie={isLoading:!1,activeOffer:null,error:null,nearByOffers:[]},Ne=D(ie,s(N,e=>o(i({},e),{isLoading:!0})),s(I,(e,r)=>o(i({},e),{isLoading:!1,activeOffer:r.offer})),s(S,(e,r)=>o(i({},e),{isLoading:!1,error:r.error})),s($,e=>o(i({},e),{isLoading:!0})),s(P,(e,r)=>o(i({},e),{isLoading:!1,nearByOffers:r.nearByOffers})),s(S,(e,r)=>o(i({},e),{isLoading:!1,error:r.error})),s(V,e=>e.activeOffer?o(i({},e),{activeOffer:o(i({},e.activeOffer),{isFavorite:!e.activeOffer.isFavorite})}):e));var E=f("[Offer Details Page] Get Reviews",a()),j=f("[Offer Details Page] Get Reviews Success",a()),M=f("[Offer Details Page] Get Reviews Failure",a()),T=f("[Offer Details Page] Send Review",a()),k=f("[Offer Details Page] Send Review Success",a()),B=f("[Offer Details Page] Send Review Failure",a());var b=class e{constructor(r){this.http=r}getReviews(r){return this.http.get(`${w}/comments/${r}`).pipe(v(u))}sendReview(r,t){return this.http.post(`${w}/comments/${r}`,t).pipe(v(u))}static \u0275fac=function(t){return new(t||e)(F(h))};static \u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"})};var J=class e{getReviews$=d((r=c(x),t=c(b))=>r.pipe(R(E),g(({id:y})=>t.getReviews(y).pipe(l(A=>j({reviews:A})),O(A=>m(M({error:A.message})))))));sendReview$=d((r=c(x),t=c(b))=>r.pipe(R(T),g(({id:y,review:A})=>t.sendReview(y,A).pipe(l(G=>k({review:G})),O(G=>m(B({error:G.message})))))));static \u0275fac=function(t){return new(t||e)};static \u0275prov=n({token:e,factory:e.\u0275fac,providedIn:"root"})};var oe=e=>e.REVIEWS_DATA,se=p(oe,e=>e.reviews),Ye=p(se,e=>[...e].sort(Q).slice(0,K));var fe={isLoading:!1,reviews:[],error:null},tr=D(fe,s(E,e=>o(i({},e),{isLoading:!0})),s(j,(e,r)=>o(i({},e),{isLoading:!1,reviews:r.reviews})),s(M,(e,r)=>o(i({},e),{isLoading:!1,error:r.error})),s(T,e=>o(i({},e),{isLoading:!0})),s(k,(e,r)=>o(i({},e),{isLoading:!1,reviews:[...e.reviews,r.review]})),s(B,(e,r)=>o(i({},e),{isLoading:!1,error:r.error})));export{Z as a,E as b,T as c,J as d,Ye as e,tr as f,N as g,$ as h,X as i,Ne as j,me as k,ve as l,le as m};
